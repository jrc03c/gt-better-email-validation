---------------------------------------------------
-- RULES (given the form "handle@domain.extension")
---------------------------------------------------
-- the whole address must contain @ and .
-- the handle must contain at least one character
-- the domain must have at least one .
-- any characters are valid in the handle
-- any characters are valid in the domain
-- the domain cannot begin with punctuation characters
-- the domain extension must be in the list of top level domains (unless the "domain" is an IP address? could that even work?)

>> betterEmailValidationTopLevelDomains = {"AAA"->1,"AARP"->1,"ABARTH"->1,"ABB"->1,"ABBOTT"->1,"ABBVIE"->1,"ABC"->1,"ABLE"->1,"ABOGADO"->1,"ABUDHABI"->1,"AC"->1,"ACADEMY"->1,"ACCENTURE"->1,"ACCOUNTANT"->1,"ACCOUNTANTS"->1,"ACO"->1,"ACTOR"->1,"AD"->1,"ADAC"->1,"ADS"->1,"ADULT"->1,"AE"->1,"AEG"->1,"AERO"->1,"AETNA"->1,"AF"->1,"AFAMILYCOMPANY"->1,"AFL"->1,"AFRICA"->1,"AG"->1,"AGAKHAN"->1,"AGENCY"->1,"AI"->1,"AIG"->1,"AIGO"->1,"AIRBUS"->1,"AIRFORCE"->1,"AIRTEL"->1,"AKDN"->1,"AL"->1,"ALFAROMEO"->1,"ALIBABA"->1,"ALIPAY"->1,"ALLFINANZ"->1,"ALLSTATE"->1,"ALLY"->1,"ALSACE"->1,"ALSTOM"->1,"AM"->1,"AMERICANEXPRESS"->1,"AMERICANFAMILY"->1,"AMEX"->1,"AMFAM"->1,"AMICA"->1,"AMSTERDAM"->1,"ANALYTICS"->1,"ANDROID"->1,"ANQUAN"->1,"ANZ"->1,"AO"->1,"AOL"->1,"APARTMENTS"->1,"APP"->1,"APPLE"->1,"AQ"->1,"AQUARELLE"->1,"AR"->1,"ARAB"->1,"ARAMCO"->1,"ARCHI"->1,"ARMY"->1,"ARPA"->1,"ART"->1,"ARTE"->1,"AS"->1,"ASDA"->1,"ASIA"->1,"ASSOCIATES"->1,"AT"->1,"ATHLETA"->1,"ATTORNEY"->1,"AU"->1,"AUCTION"->1,"AUDI"->1,"AUDIBLE"->1,"AUDIO"->1,"AUSPOST"->1,"AUTHOR"->1,"AUTO"->1,"AUTOS"->1,"AVIANCA"->1,"AW"->1,"AWS"->1,"AX"->1,"AXA"->1,"AZ"->1,"AZURE"->1,"BA"->1,"BABY"->1,"BAIDU"->1,"BANAMEX"->1,"BANANAREPUBLIC"->1,"BAND"->1,"BANK"->1,"BAR"->1,"BARCELONA"->1,"BARCLAYCARD"->1,"BARCLAYS"->1,"BAREFOOT"->1,"BARGAINS"->1,"BASEBALL"->1,"BASKETBALL"->1,"BAUHAUS"->1,"BAYERN"->1,"BB"->1,"BBC"->1,"BBT"->1,"BBVA"->1,"BCG"->1,"BCN"->1,"BD"->1,"BE"->1,"BEATS"->1,"BEAUTY"->1,"BEER"->1,"BENTLEY"->1,"BERLIN"->1,"BEST"->1,"BESTBUY"->1,"BET"->1,"BF"->1,"BG"->1,"BH"->1,"BHARTI"->1,"BI"->1,"BIBLE"->1,"BID"->1,"BIKE"->1,"BING"->1,"BINGO"->1,"BIO"->1,"BIZ"->1,"BJ"->1,"BLACK"->1,"BLACKFRIDAY"->1,"BLOCKBUSTER"->1,"BLOG"->1,"BLOOMBERG"->1,"BLUE"->1,"BM"->1,"BMS"->1,"BMW"->1,"BN"->1,"BNPPARIBAS"->1,"BO"->1,"BOATS"->1,"BOEHRINGER"->1,"BOFA"->1,"BOM"->1,"BOND"->1,"BOO"->1,"BOOK"->1,"BOOKING"->1,"BOSCH"->1,"BOSTIK"->1,"BOSTON"->1,"BOT"->1,"BOUTIQUE"->1,"BOX"->1,"BR"->1,"BRADESCO"->1,"BRIDGESTONE"->1,"BROADWAY"->1,"BROKER"->1,"BROTHER"->1,"BRUSSELS"->1,"BS"->1,"BT"->1,"BUDAPEST"->1,"BUGATTI"->1,"BUILD"->1,"BUILDERS"->1,"BUSINESS"->1,"BUY"->1,"BUZZ"->1,"BV"->1,"BW"->1,"BY"->1,"BZ"->1,"BZH"->1,"CA"->1,"CAB"->1,"CAFE"->1,"CAL"->1,"CALL"->1,"CALVINKLEIN"->1,"CAM"->1,"CAMERA"->1,"CAMP"->1,"CANCERRESEARCH"->1,"CANON"->1,"CAPETOWN"->1,"CAPITAL"->1,"CAPITALONE"->1,"CAR"->1,"CARAVAN"->1,"CARDS"->1,"CARE"->1,"CAREER"->1,"CAREERS"->1,"CARS"->1,"CASA"->1,"CASE"->1,"CASEIH"->1,"CASH"->1,"CASINO"->1,"CAT"->1,"CATERING"->1,"CATHOLIC"->1,"CBA"->1,"CBN"->1,"CBRE"->1,"CBS"->1,"CC"->1,"CD"->1,"CEB"->1,"CENTER"->1,"CEO"->1,"CERN"->1,"CF"->1,"CFA"->1,"CFD"->1,"CG"->1,"CH"->1,"CHANEL"->1,"CHANNEL"->1,"CHARITY"->1,"CHASE"->1,"CHAT"->1,"CHEAP"->1,"CHINTAI"->1,"CHRISTMAS"->1,"CHROME"->1,"CHURCH"->1,"CI"->1,"CIPRIANI"->1,"CIRCLE"->1,"CISCO"->1,"CITADEL"->1,"CITI"->1,"CITIC"->1,"CITY"->1,"CITYEATS"->1,"CK"->1,"CL"->1,"CLAIMS"->1,"CLEANING"->1,"CLICK"->1,"CLINIC"->1,"CLINIQUE"->1,"CLOTHING"->1,"CLOUD"->1,"CLUB"->1,"CLUBMED"->1,"CM"->1,"CN"->1,"CO"->1,"COACH"->1,"CODES"->1,"COFFEE"->1,"COLLEGE"->1,"COLOGNE"->1,"COM"->1,"COMCAST"->1,"COMMBANK"->1,"COMMUNITY"->1,"COMPANY"->1,"COMPARE"->1,"COMPUTER"->1,"COMSEC"->1,"CONDOS"->1,"CONSTRUCTION"->1,"CONSULTING"->1,"CONTACT"->1,"CONTRACTORS"->1,"COOKING"->1,"COOKINGCHANNEL"->1,"COOL"->1,"COOP"->1,"CORSICA"->1,"COUNTRY"->1,"COUPON"->1,"COUPONS"->1,"COURSES"->1,"CPA"->1,"CR"->1,"CREDIT"->1,"CREDITCARD"->1,"CREDITUNION"->1,"CRICKET"->1,"CROWN"->1,"CRS"->1,"CRUISE"->1,"CRUISES"->1,"CSC"->1,"CU"->1,"CUISINELLA"->1,"CV"->1,"CW"->1,"CX"->1,"CY"->1,"CYMRU"->1,"CYOU"->1,"CZ"->1,"DABUR"->1,"DAD"->1,"DANCE"->1,"DATA"->1,"DATE"->1,"DATING"->1,"DATSUN"->1,"DAY"->1,"DCLK"->1,"DDS"->1,"DE"->1,"DEAL"->1,"DEALER"->1,"DEALS"->1,"DEGREE"->1,"DELIVERY"->1,"DELL"->1,"DELOITTE"->1,"DELTA"->1,"DEMOCRAT"->1,"DENTAL"->1,"DENTIST"->1,"DESI"->1,"DESIGN"->1,"DEV"->1,"DHL"->1,"DIAMONDS"->1,"DIET"->1,"DIGITAL"->1,"DIRECT"->1,"DIRECTORY"->1,"DISCOUNT"->1,"DISCOVER"->1,"DISH"->1,"DIY"->1,"DJ"->1,"DK"->1,"DM"->1,"DNP"->1,"DO"->1,"DOCS"->1,"DOCTOR"->1,"DOG"->1,"DOMAINS"->1,"DOT"->1,"DOWNLOAD"->1,"DRIVE"->1,"DTV"->1,"DUBAI"->1,"DUCK"->1,"DUNLOP"->1,"DUPONT"->1,"DURBAN"->1,"DVAG"->1,"DVR"->1,"DZ"->1,"EARTH"->1,"EAT"->1,"EC"->1,"ECO"->1,"EDEKA"->1,"EDU"->1,"EDUCATION"->1,"EE"->1,"EG"->1,"EMAIL"->1,"EMERCK"->1,"ENERGY"->1,"ENGINEER"->1,"ENGINEERING"->1,"ENTERPRISES"->1,"EPSON"->1,"EQUIPMENT"->1,"ER"->1,"ERICSSON"->1,"ERNI"->1,"ES"->1,"ESQ"->1,"ESTATE"->1,"ESURANCE"->1,"ET"->1,"ETISALAT"->1,"EU"->1,"EUROVISION"->1,"EUS"->1,"EVENTS"->1,"EXCHANGE"->1,"EXPERT"->1,"EXPOSED"->1,"EXPRESS"->1,"EXTRASPACE"->1,"FAGE"->1,"FAIL"->1,"FAIRWINDS"->1,"FAITH"->1,"FAMILY"->1,"FAN"->1,"FANS"->1,"FARM"->1,"FARMERS"->1,"FASHION"->1,"FAST"->1,"FEDEX"->1,"FEEDBACK"->1,"FERRARI"->1,"FERRERO"->1,"FI"->1,"FIAT"->1,"FIDELITY"->1,"FIDO"->1,"FILM"->1,"FINAL"->1,"FINANCE"->1,"FINANCIAL"->1,"FIRE"->1,"FIRESTONE"->1,"FIRMDALE"->1,"FISH"->1,"FISHING"->1,"FIT"->1,"FITNESS"->1,"FJ"->1,"FK"->1,"FLICKR"->1,"FLIGHTS"->1,"FLIR"->1,"FLORIST"->1,"FLOWERS"->1,"FLY"->1,"FM"->1,"FO"->1,"FOO"->1,"FOOD"->1,"FOODNETWORK"->1,"FOOTBALL"->1,"FORD"->1,"FOREX"->1,"FORSALE"->1,"FORUM"->1,"FOUNDATION"->1,"FOX"->1,"FR"->1,"FREE"->1,"FRESENIUS"->1,"FRL"->1,"FROGANS"->1,"FRONTDOOR"->1,"FRONTIER"->1,"FTR"->1,"FUJITSU"->1,"FUJIXEROX"->1,"FUN"->1,"FUND"->1,"FURNITURE"->1,"FUTBOL"->1,"FYI"->1,"GA"->1,"GAL"->1,"GALLERY"->1,"GALLO"->1,"GALLUP"->1,"GAME"->1,"GAMES"->1,"GAP"->1,"GARDEN"->1,"GAY"->1,"GB"->1,"GBIZ"->1,"GD"->1,"GDN"->1,"GE"->1,"GEA"->1,"GENT"->1,"GENTING"->1,"GEORGE"->1,"GF"->1,"GG"->1,"GGEE"->1,"GH"->1,"GI"->1,"GIFT"->1,"GIFTS"->1,"GIVES"->1,"GIVING"->1,"GL"->1,"GLADE"->1,"GLASS"->1,"GLE"->1,"GLOBAL"->1,"GLOBO"->1,"GM"->1,"GMAIL"->1,"GMBH"->1,"GMO"->1,"GMX"->1,"GN"->1,"GODADDY"->1,"GOLD"->1,"GOLDPOINT"->1,"GOLF"->1,"GOO"->1,"GOODYEAR"->1,"GOOG"->1,"GOOGLE"->1,"GOP"->1,"GOT"->1,"GOV"->1,"GP"->1,"GQ"->1,"GR"->1,"GRAINGER"->1,"GRAPHICS"->1,"GRATIS"->1,"GREEN"->1,"GRIPE"->1,"GROCERY"->1,"GROUP"->1,"GS"->1,"GT"->1,"GU"->1,"GUARDIAN"->1,"GUCCI"->1,"GUGE"->1,"GUIDE"->1,"GUITARS"->1,"GURU"->1,"GW"->1,"GY"->1,"HAIR"->1,"HAMBURG"->1,"HANGOUT"->1,"HAUS"->1,"HBO"->1,"HDFC"->1,"HDFCBANK"->1,"HEALTH"->1,"HEALTHCARE"->1,"HELP"->1,"HELSINKI"->1,"HERE"->1,"HERMES"->1,"HGTV"->1,"HIPHOP"->1,"HISAMITSU"->1,"HITACHI"->1,"HIV"->1,"HK"->1,"HKT"->1,"HM"->1,"HN"->1,"HOCKEY"->1,"HOLDINGS"->1,"HOLIDAY"->1,"HOMEDEPOT"->1,"HOMEGOODS"->1,"HOMES"->1,"HOMESENSE"->1,"HONDA"->1,"HORSE"->1,"HOSPITAL"->1,"HOST"->1,"HOSTING"->1,"HOT"->1,"HOTELES"->1,"HOTELS"->1,"HOTMAIL"->1,"HOUSE"->1,"HOW"->1,"HR"->1,"HSBC"->1,"HT"->1,"HU"->1,"HUGHES"->1,"HYATT"->1,"HYUNDAI"->1,"IBM"->1,"ICBC"->1,"ICE"->1,"ICU"->1,"ID"->1,"IE"->1,"IEEE"->1,"IFM"->1,"IKANO"->1,"IL"->1,"IM"->1,"IMAMAT"->1,"IMDB"->1,"IMMO"->1,"IMMOBILIEN"->1,"IN"->1,"INC"->1,"INDUSTRIES"->1,"INFINITI"->1,"INFO"->1,"ING"->1,"INK"->1,"INSTITUTE"->1,"INSURANCE"->1,"INSURE"->1,"INT"->1,"INTEL"->1,"INTERNATIONAL"->1,"INTUIT"->1,"INVESTMENTS"->1,"IO"->1,"IPIRANGA"->1,"IQ"->1,"IR"->1,"IRISH"->1,"IS"->1,"ISMAILI"->1,"IST"->1,"ISTANBUL"->1,"IT"->1,"ITAU"->1,"ITV"->1,"IVECO"->1,"JAGUAR"->1,"JAVA"->1,"JCB"->1,"JCP"->1,"JE"->1,"JEEP"->1,"JETZT"->1,"JEWELRY"->1,"JIO"->1,"JLL"->1,"JM"->1,"JMP"->1,"JNJ"->1,"JO"->1,"JOBS"->1,"JOBURG"->1,"JOT"->1,"JOY"->1,"JP"->1,"JPMORGAN"->1,"JPRS"->1,"JUEGOS"->1,"JUNIPER"->1,"KAUFEN"->1,"KDDI"->1,"KE"->1,"KERRYHOTELS"->1,"KERRYLOGISTICS"->1,"KERRYPROPERTIES"->1,"KFH"->1,"KG"->1,"KH"->1,"KI"->1,"KIA"->1,"KIM"->1,"KINDER"->1,"KINDLE"->1,"KITCHEN"->1,"KIWI"->1,"KM"->1,"KN"->1,"KOELN"->1,"KOMATSU"->1,"KOSHER"->1,"KP"->1,"KPMG"->1,"KPN"->1,"KR"->1,"KRD"->1,"KRED"->1,"KUOKGROUP"->1,"KW"->1,"KY"->1,"KYOTO"->1,"KZ"->1,"LA"->1,"LACAIXA"->1,"LAMBORGHINI"->1,"LAMER"->1,"LANCASTER"->1,"LANCIA"->1,"LAND"->1,"LANDROVER"->1,"LANXESS"->1,"LASALLE"->1,"LAT"->1,"LATINO"->1,"LATROBE"->1,"LAW"->1,"LAWYER"->1,"LB"->1,"LC"->1,"LDS"->1,"LEASE"->1,"LECLERC"->1,"LEFRAK"->1,"LEGAL"->1,"LEGO"->1,"LEXUS"->1,"LGBT"->1,"LI"->1,"LIDL"->1,"LIFE"->1,"LIFEINSURANCE"->1,"LIFESTYLE"->1,"LIGHTING"->1,"LIKE"->1,"LILLY"->1,"LIMITED"->1,"LIMO"->1,"LINCOLN"->1,"LINDE"->1,"LINK"->1,"LIPSY"->1,"LIVE"->1,"LIVING"->1,"LIXIL"->1,"LK"->1,"LLC"->1,"LLP"->1,"LOAN"->1,"LOANS"->1,"LOCKER"->1,"LOCUS"->1,"LOFT"->1,"LOL"->1,"LONDON"->1,"LOTTE"->1,"LOTTO"->1,"LOVE"->1,"LPL"->1,"LPLFINANCIAL"->1,"LR"->1,"LS"->1,"LT"->1,"LTD"->1,"LTDA"->1,"LU"->1,"LUNDBECK"->1,"LUPIN"->1,"LUXE"->1,"LUXURY"->1,"LV"->1,"LY"->1,"MA"->1,"MACYS"->1,"MADRID"->1,"MAIF"->1,"MAISON"->1,"MAKEUP"->1,"MAN"->1,"MANAGEMENT"->1,"MANGO"->1,"MAP"->1,"MARKET"->1,"MARKETING"->1,"MARKETS"->1,"MARRIOTT"->1,"MARSHALLS"->1,"MASERATI"->1,"MATTEL"->1,"MBA"->1,"MC"->1,"MCKINSEY"->1,"MD"->1,"ME"->1,"MED"->1,"MEDIA"->1,"MEET"->1,"MELBOURNE"->1,"MEME"->1,"MEMORIAL"->1,"MEN"->1,"MENU"->1,"MERCKMSD"->1,"METLIFE"->1,"MG"->1,"MH"->1,"MIAMI"->1,"MICROSOFT"->1,"MIL"->1,"MINI"->1,"MINT"->1,"MIT"->1,"MITSUBISHI"->1,"MK"->1,"ML"->1,"MLB"->1,"MLS"->1,"MM"->1,"MMA"->1,"MN"->1,"MO"->1,"MOBI"->1,"MOBILE"->1,"MODA"->1,"MOE"->1,"MOI"->1,"MOM"->1,"MONASH"->1,"MONEY"->1,"MONSTER"->1,"MORMON"->1,"MORTGAGE"->1,"MOSCOW"->1,"MOTO"->1,"MOTORCYCLES"->1,"MOV"->1,"MOVIE"->1,"MP"->1,"MQ"->1,"MR"->1,"MS"->1,"MSD"->1,"MT"->1,"MTN"->1,"MTR"->1,"MU"->1,"MUSEUM"->1,"MUTUAL"->1,"MV"->1,"MW"->1,"MX"->1,"MY"->1,"MZ"->1,"NA"->1,"NAB"->1,"NAGOYA"->1,"NAME"->1,"NATIONWIDE"->1,"NATURA"->1,"NAVY"->1,"NBA"->1,"NC"->1,"NE"->1,"NEC"->1,"NET"->1,"NETBANK"->1,"NETFLIX"->1,"NETWORK"->1,"NEUSTAR"->1,"NEW"->1,"NEWHOLLAND"->1,"NEWS"->1,"NEXT"->1,"NEXTDIRECT"->1,"NEXUS"->1,"NF"->1,"NFL"->1,"NG"->1,"NGO"->1,"NHK"->1,"NI"->1,"NICO"->1,"NIKE"->1,"NIKON"->1,"NINJA"->1,"NISSAN"->1,"NISSAY"->1,"NL"->1,"NO"->1,"NOKIA"->1,"NORTHWESTERNMUTUAL"->1,"NORTON"->1,"NOW"->1,"NOWRUZ"->1,"NOWTV"->1,"NP"->1,"NR"->1,"NRA"->1,"NRW"->1,"NTT"->1,"NU"->1,"NYC"->1,"NZ"->1,"OBI"->1,"OBSERVER"->1,"OFF"->1,"OFFICE"->1,"OKINAWA"->1,"OLAYAN"->1,"OLAYANGROUP"->1,"OLDNAVY"->1,"OLLO"->1,"OM"->1,"OMEGA"->1,"ONE"->1,"ONG"->1,"ONL"->1,"ONLINE"->1,"ONYOURSIDE"->1,"OOO"->1,"OPEN"->1,"ORACLE"->1,"ORANGE"->1,"ORG"->1,"ORGANIC"->1,"ORIGINS"->1,"OSAKA"->1,"OTSUKA"->1,"OTT"->1,"OVH"->1,"PA"->1,"PAGE"->1,"PANASONIC"->1,"PARIS"->1,"PARS"->1,"PARTNERS"->1,"PARTS"->1,"PARTY"->1,"PASSAGENS"->1,"PAY"->1,"PCCW"->1,"PE"->1,"PET"->1,"PF"->1,"PFIZER"->1,"PG"->1,"PH"->1,"PHARMACY"->1,"PHD"->1,"PHILIPS"->1,"PHONE"->1,"PHOTO"->1,"PHOTOGRAPHY"->1,"PHOTOS"->1,"PHYSIO"->1,"PICS"->1,"PICTET"->1,"PICTURES"->1,"PID"->1,"PIN"->1,"PING"->1,"PINK"->1,"PIONEER"->1,"PIZZA"->1,"PK"->1,"PL"->1,"PLACE"->1,"PLAY"->1,"PLAYSTATION"->1,"PLUMBING"->1,"PLUS"->1,"PM"->1,"PN"->1,"PNC"->1,"POHL"->1,"POKER"->1,"POLITIE"->1,"PORN"->1,"POST"->1,"PR"->1,"PRAMERICA"->1,"PRAXI"->1,"PRESS"->1,"PRIME"->1,"PRO"->1,"PROD"->1,"PRODUCTIONS"->1,"PROF"->1,"PROGRESSIVE"->1,"PROMO"->1,"PROPERTIES"->1,"PROPERTY"->1,"PROTECTION"->1,"PRU"->1,"PRUDENTIAL"->1,"PS"->1,"PT"->1,"PUB"->1,"PW"->1,"PWC"->1,"PY"->1,"QA"->1,"QPON"->1,"QUEBEC"->1,"QUEST"->1,"QVC"->1,"RACING"->1,"RADIO"->1,"RAID"->1,"RE"->1,"READ"->1,"REALESTATE"->1,"REALTOR"->1,"REALTY"->1,"RECIPES"->1,"RED"->1,"REDSTONE"->1,"REDUMBRELLA"->1,"REHAB"->1,"REISE"->1,"REISEN"->1,"REIT"->1,"RELIANCE"->1,"REN"->1,"RENT"->1,"RENTALS"->1,"REPAIR"->1,"REPORT"->1,"REPUBLICAN"->1,"REST"->1,"RESTAURANT"->1,"REVIEW"->1,"REVIEWS"->1,"REXROTH"->1,"RICH"->1,"RICHARDLI"->1,"RICOH"->1,"RIGHTATHOME"->1,"RIL"->1,"RIO"->1,"RIP"->1,"RMIT"->1,"RO"->1,"ROCHER"->1,"ROCKS"->1,"RODEO"->1,"ROGERS"->1,"ROOM"->1,"RS"->1,"RSVP"->1,"RU"->1,"RUGBY"->1,"RUHR"->1,"RUN"->1,"RW"->1,"RWE"->1,"RYUKYU"->1,"SA"->1,"SAARLAND"->1,"SAFE"->1,"SAFETY"->1,"SAKURA"->1,"SALE"->1,"SALON"->1,"SAMSCLUB"->1,"SAMSUNG"->1,"SANDVIK"->1,"SANDVIKCOROMANT"->1,"SANOFI"->1,"SAP"->1,"SARL"->1,"SAS"->1,"SAVE"->1,"SAXO"->1,"SB"->1,"SBI"->1,"SBS"->1,"SC"->1,"SCA"->1,"SCB"->1,"SCHAEFFLER"->1,"SCHMIDT"->1,"SCHOLARSHIPS"->1,"SCHOOL"->1,"SCHULE"->1,"SCHWARZ"->1,"SCIENCE"->1,"SCJOHNSON"->1,"SCOR"->1,"SCOT"->1,"SD"->1,"SE"->1,"SEARCH"->1,"SEAT"->1,"SECURE"->1,"SECURITY"->1,"SEEK"->1,"SELECT"->1,"SENER"->1,"SERVICES"->1,"SES"->1,"SEVEN"->1,"SEW"->1,"SEX"->1,"SEXY"->1,"SFR"->1,"SG"->1,"SH"->1,"SHANGRILA"->1,"SHARP"->1,"SHAW"->1,"SHELL"->1,"SHIA"->1,"SHIKSHA"->1,"SHOES"->1,"SHOP"->1,"SHOPPING"->1,"SHOUJI"->1,"SHOW"->1,"SHOWTIME"->1,"SHRIRAM"->1,"SI"->1,"SILK"->1,"SINA"->1,"SINGLES"->1,"SITE"->1,"SJ"->1,"SK"->1,"SKI"->1,"SKIN"->1,"SKY"->1,"SKYPE"->1,"SL"->1,"SLING"->1,"SM"->1,"SMART"->1,"SMILE"->1,"SN"->1,"SNCF"->1,"SO"->1,"SOCCER"->1,"SOCIAL"->1,"SOFTBANK"->1,"SOFTWARE"->1,"SOHU"->1,"SOLAR"->1,"SOLUTIONS"->1,"SONG"->1,"SONY"->1,"SOY"->1,"SPACE"->1,"SPORT"->1,"SPOT"->1,"SPREADBETTING"->1,"SR"->1,"SRL"->1,"SS"->1,"ST"->1,"STADA"->1,"STAPLES"->1,"STAR"->1,"STATEBANK"->1,"STATEFARM"->1,"STC"->1,"STCGROUP"->1,"STOCKHOLM"->1,"STORAGE"->1,"STORE"->1,"STREAM"->1,"STUDIO"->1,"STUDY"->1,"STYLE"->1,"SU"->1,"SUCKS"->1,"SUPPLIES"->1,"SUPPLY"->1,"SUPPORT"->1,"SURF"->1,"SURGERY"->1,"SUZUKI"->1,"SV"->1,"SWATCH"->1,"SWIFTCOVER"->1,"SWISS"->1,"SX"->1,"SY"->1,"SYDNEY"->1,"SYMANTEC"->1,"SYSTEMS"->1,"SZ"->1,"TAB"->1,"TAIPEI"->1,"TALK"->1,"TAOBAO"->1,"TARGET"->1,"TATAMOTORS"->1,"TATAR"->1,"TATTOO"->1,"TAX"->1,"TAXI"->1,"TC"->1,"TCI"->1,"TD"->1,"TDK"->1,"TEAM"->1,"TECH"->1,"TECHNOLOGY"->1,"TEL"->1,"TEMASEK"->1,"TENNIS"->1,"TEVA"->1,"TF"->1,"TG"->1,"TH"->1,"THD"->1,"THEATER"->1,"THEATRE"->1,"TIAA"->1,"TICKETS"->1,"TIENDA"->1,"TIFFANY"->1,"TIPS"->1,"TIRES"->1,"TIROL"->1,"TJ"->1,"TJMAXX"->1,"TJX"->1,"TK"->1,"TKMAXX"->1,"TL"->1,"TM"->1,"TMALL"->1,"TN"->1,"TO"->1,"TODAY"->1,"TOKYO"->1,"TOOLS"->1,"TOP"->1,"TORAY"->1,"TOSHIBA"->1,"TOTAL"->1,"TOURS"->1,"TOWN"->1,"TOYOTA"->1,"TOYS"->1,"TR"->1,"TRADE"->1,"TRADING"->1,"TRAINING"->1,"TRAVEL"->1,"TRAVELCHANNEL"->1,"TRAVELERS"->1,"TRAVELERSINSURANCE"->1,"TRUST"->1,"TRV"->1,"TT"->1,"TUBE"->1,"TUI"->1,"TUNES"->1,"TUSHU"->1,"TV"->1,"TVS"->1,"TW"->1,"TZ"->1,"UA"->1,"UBANK"->1,"UBS"->1,"UG"->1,"UK"->1,"UNICOM"->1,"UNIVERSITY"->1,"UNO"->1,"UOL"->1,"UPS"->1,"US"->1,"UY"->1,"UZ"->1,"VA"->1,"VACATIONS"->1,"VANA"->1,"VANGUARD"->1,"VC"->1,"VE"->1,"VEGAS"->1,"VENTURES"->1,"VERISIGN"->1,"VERSICHERUNG"->1,"VET"->1,"VG"->1,"VI"->1,"VIAJES"->1,"VIDEO"->1,"VIG"->1,"VIKING"->1,"VILLAS"->1,"VIN"->1,"VIP"->1,"VIRGIN"->1,"VISA"->1,"VISION"->1,"VIVA"->1,"VIVO"->1,"VLAANDEREN"->1,"VN"->1,"VODKA"->1,"VOLKSWAGEN"->1,"VOLVO"->1,"VOTE"->1,"VOTING"->1,"VOTO"->1,"VOYAGE"->1,"VU"->1,"VUELOS"->1,"WALES"->1,"WALMART"->1,"WALTER"->1,"WANG"->1,"WANGGOU"->1,"WATCH"->1,"WATCHES"->1,"WEATHER"->1,"WEATHERCHANNEL"->1,"WEBCAM"->1,"WEBER"->1,"WEBSITE"->1,"WED"->1,"WEDDING"->1,"WEIBO"->1,"WEIR"->1,"WF"->1,"WHOSWHO"->1,"WIEN"->1,"WIKI"->1,"WILLIAMHILL"->1,"WIN"->1,"WINDOWS"->1,"WINE"->1,"WINNERS"->1,"WME"->1,"WOLTERSKLUWER"->1,"WOODSIDE"->1,"WORK"->1,"WORKS"->1,"WORLD"->1,"WOW"->1,"WS"->1,"WTC"->1,"WTF"->1,"XBOX"->1,"XEROX"->1,"XFINITY"->1,"XIHUAN"->1,"XIN"->1,"XN--11B4C3D"->1,"XN--1CK2E1B"->1,"XN--1QQW23A"->1,"XN--2SCRJ9C"->1,"XN--30RR7Y"->1,"XN--3BST00M"->1,"XN--3DS443G"->1,"XN--3E0B707E"->1,"XN--3HCRJ9C"->1,"XN--3OQ18VL8PN36A"->1,"XN--3PXU8K"->1,"XN--42C2D9A"->1,"XN--45BR5CYL"->1,"XN--45BRJ9C"->1,"XN--45Q11C"->1,"XN--4GBRIM"->1,"XN--54B7FTA0CC"->1,"XN--55QW42G"->1,"XN--55QX5D"->1,"XN--5SU34J936BGSG"->1,"XN--5TZM5G"->1,"XN--6FRZ82G"->1,"XN--6QQ986B3XL"->1,"XN--80ADXHKS"->1,"XN--80AO21A"->1,"XN--80AQECDR1A"->1,"XN--80ASEHDB"->1,"XN--80ASWG"->1,"XN--8Y0A063A"->1,"XN--90A3AC"->1,"XN--90AE"->1,"XN--90AIS"->1,"XN--9DBQ2A"->1,"XN--9ET52U"->1,"XN--9KRT00A"->1,"XN--B4W605FERD"->1,"XN--BCK1B9A5DRE4C"->1,"XN--C1AVG"->1,"XN--C2BR7G"->1,"XN--CCK2B3B"->1,"XN--CG4BKI"->1,"XN--CLCHC0EA0B2G2A9GCD"->1,"XN--CZR694B"->1,"XN--CZRS0T"->1,"XN--CZRU2D"->1,"XN--D1ACJ3B"->1,"XN--D1ALF"->1,"XN--E1A4C"->1,"XN--ECKVDTC9D"->1,"XN--EFVY88H"->1,"XN--FCT429K"->1,"XN--FHBEI"->1,"XN--FIQ228C5HS"->1,"XN--FIQ64B"->1,"XN--FIQS8S"->1,"XN--FIQZ9S"->1,"XN--FJQ720A"->1,"XN--FLW351E"->1,"XN--FPCRJ9C3D"->1,"XN--FZC2C9E2C"->1,"XN--FZYS8D69UVGM"->1,"XN--G2XX48C"->1,"XN--GCKR3F0F"->1,"XN--GECRJ9C"->1,"XN--GK3AT1E"->1,"XN--H2BREG3EVE"->1,"XN--H2BRJ9C"->1,"XN--H2BRJ9C8C"->1,"XN--HXT814E"->1,"XN--I1B6B1A6A2E"->1,"XN--IMR513N"->1,"XN--IO0A7I"->1,"XN--J1AEF"->1,"XN--J1AMH"->1,"XN--J6W193G"->1,"XN--JLQ61U9W7B"->1,"XN--JVR189M"->1,"XN--KCRX77D1X4A"->1,"XN--KPRW13D"->1,"XN--KPRY57D"->1,"XN--KPU716F"->1,"XN--KPUT3I"->1,"XN--L1ACC"->1,"XN--LGBBAT1AD8J"->1,"XN--MGB9AWBF"->1,"XN--MGBA3A3EJT"->1,"XN--MGBA3A4F16A"->1,"XN--MGBA7C0BBN0A"->1,"XN--MGBAAKC7DVF"->1,"XN--MGBAAM7A8H"->1,"XN--MGBAB2BD"->1,"XN--MGBAH1A3HJKRD"->1,"XN--MGBAI9AZGQP6J"->1,"XN--MGBAYH7GPA"->1,"XN--MGBBH1A"->1,"XN--MGBBH1A71E"->1,"XN--MGBC0A9AZCG"->1,"XN--MGBCA7DZDO"->1,"XN--MGBCPQ6GPA1A"->1,"XN--MGBERP4A5D4AR"->1,"XN--MGBGU82A"->1,"XN--MGBI4ECEXP"->1,"XN--MGBPL2FH"->1,"XN--MGBT3DHD"->1,"XN--MGBTX2B"->1,"XN--MGBX4CD0AB"->1,"XN--MIX891F"->1,"XN--MK1BU44C"->1,"XN--MXTQ1M"->1,"XN--NGBC5AZD"->1,"XN--NGBE9E0A"->1,"XN--NGBRX"->1,"XN--NODE"->1,"XN--NQV7F"->1,"XN--NQV7FS00EMA"->1,"XN--NYQY26A"->1,"XN--O3CW4H"->1,"XN--OGBPF8FL"->1,"XN--OTU796D"->1,"XN--P1ACF"->1,"XN--P1AI"->1,"XN--PBT977C"->1,"XN--PGBS0DH"->1,"XN--PSSY2U"->1,"XN--Q7CE6A"->1,"XN--Q9JYB4C"->1,"XN--QCKA1PMC"->1,"XN--QXA6A"->1,"XN--QXAM"->1,"XN--RHQV96G"->1,"XN--ROVU88B"->1,"XN--RVC1E0AM3E"->1,"XN--S9BRJ9C"->1,"XN--SES554G"->1,"XN--T60B56A"->1,"XN--TCKWE"->1,"XN--TIQ49XQYJ"->1,"XN--UNUP4Y"->1,"XN--VERMGENSBERATER-CTB"->1,"XN--VERMGENSBERATUNG-PWB"->1,"XN--VHQUV"->1,"XN--VUQ861B"->1,"XN--W4R85EL8FHU5DNRA"->1,"XN--W4RS40L"->1,"XN--WGBH1C"->1,"XN--WGBL6A"->1,"XN--XHQ521B"->1,"XN--XKC2AL3HYE2A"->1,"XN--XKC2DL3A5EE0H"->1,"XN--Y9A3AQ"->1,"XN--YFRO4I67O"->1,"XN--YGBI2AMMX"->1,"XN--ZFR164B"->1,"XXX"->1,"XYZ"->1,"YACHTS"->1,"YAHOO"->1,"YAMAXUN"->1,"YANDEX"->1,"YE"->1,"YODOBASHI"->1,"YOGA"->1,"YOKOHAMA"->1,"YOU"->1,"YOUTUBE"->1,"YT"->1,"YUN"->1,"ZA"->1,"ZAPPOS"->1,"ZARA"->1,"ZERO"->1,"ZIP"->1,"ZM"->1,"ZONE"->1,"ZUERICH"->1,"ZW"->1,""->1}

*if: not betterEmailValidationInput
	>> betterEmailValidationInput = "someone@example.com"

>> betterEmailValidationCounter = 1
>> betterEmailValidationHandle = ""
>> betterEmailValidationDomain = ""
>> betterEmailValidationDomainExtension = ""
>> betterEmailValidationPhase = "handle"
>> betterEmailValidationOutput = "yes"
>> betterEmailValidationFailPhase = "none"
>> betterEmailValidationFailIndex = -1
>> betterEmailValidationFailChar = ""
>> betterEmailValidationFailMessage = ""

-- break address into handle and domain
>> stringSplitterInput = {"string" -> betterEmailValidationInput, "delimiter" -> "@"}
*program: String Splitter

*if: stringSplitterOutput.size < 2
	>> betterEmailValidationFailPhase = "all"
	>> betterEmailValidationFailIndex = 1
	>> betterEmailValidationFailChar = ""
	>> betterEmailValidationFailMessage = "An email address must be in the form 'handle@domain.extension'. The email address you entered did not contain an '@' character."
	*return

*if: stringSplitterOutput.size > 2
	>> betterEmailValidationFailPhase = "all"
	>> betterEmailValidationFailIndex = 1
	>> betterEmailValidationFailChar = ""
	>> betterEmailValidationFailMessage = "An email address must be in the form 'handle@domain.extension'. The email address you entered contained more than one '@' character."
	*return

>> betterEmailValidationHandle = stringSplitterOutput[1]
>> betterEmailValidationDomain = stringSplitterOutput[2]

*if: betterEmailValidationHandle.size = 0
	>> betterEmailValidationFailPhase = "handle"
	>> betterEmailValidationFailIndex = 1
	>> betterEmailValidationFailChar = ""
	>> betterEmailValidationFailMessage = "The handle of an email address (the part before the '@' character) must contain at least one character."
	*return

*if: betterEmailValidationDomain.size < 3
	>> betterEmailValidationFailPhase = "domain"
	>> betterEmailValidationFailIndex = 1
	>> betterEmailValidationFailChar = ""
	>> betterEmailValidationFailMessage = "The domain of an email address (the part after the '@' character) must contain at least three characters, at least one of which must be a period."
	*return

-- break domain into subdomain(s) + domain and extension
>> stringSplitterInput = {"string" -> betterEmailValidationDomain, "delimiter" -> "."}
*program: String Splitter

*if: stringSplitterOutput.size < 2
	>> betterEmailValidationFailPhase = "domain"
	>> betterEmailValidationFailIndex = 1
	>> betterEmailValidationFailChar = ""
	>> betterEmailValidationFailMessage = "The domain of an email address (the part after the '@' character) must contain a period."
	*return

-- make sure that the extension is in the list of top level domains
>> betterEmailValidationDomainExtension = stringSplitterOutput[stringSplitterOutput.size]

*if: not betterEmailValidationTopLevelDomains[betterEmailValidationDomainExtension]
	>> betterEmailValidationFailPhase = "domain"
	>> betterEmailValidationFailIndex = 1
	>> betterEmailValidationFailChar = ""
	>> betterEmailValidationFailMessage = "The domain extension in this email address is not a valid extension. Valid domain extensions are things like '.com' or '.org'. The full list of valid domain name extensions is available here: http://data.iana.org/TLD/tlds-alpha-by-domain.txt"
	*return
